{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../src/components/layout';\nimport Fetch from 'isomorphic-unfetch';\nimport { MDBBtn, MDBCard, MDBCardBody, MDBCardImage, MDBCardTitle, MDBCardText, MDBCol } from 'mdbreact';\nimport public_ip from 'public-ip';\nvar SAD_FACE = \"\\nhttps://www.nationwidechildrens.org/-/media/nch/giving/images/on-our-sleeves-1010/icons/icon-teasers/w45084_iconcollectionlandingiconteaserimages_facesad.jpg\\n\";\n\nvar Index = function Index(props) {\n  return __jsx(Layout, null, __jsx(\"center\", null, __jsx(MDBCol, {\n    className: \"pt-2\"\n  }, __jsx(MDBCard, {\n    style: {\n      width: \"auto\"\n    },\n    className: \"stylish-color-dark\"\n  }, __jsx(MDBCardImage, {\n    className: \"w-75 img-fluid pt-4 pb-4 px-2\",\n    src: props.data.file_url || SAD_FACE,\n    alt: \"The big sad\",\n    waves: true\n  }), __jsx(MDBCardBody, null, __jsx(MDBCardTitle, {\n    className: \"white-text h3\"\n  }, props.data.file_name), __jsx(MDBCardText, {\n    className: \"white-text\"\n  }, __jsx(\"b\", null, __jsx(\"u\", null, \"Wowe api call\")), __jsx(\"p\", {\n    className: \"green-text\"\n  }, _JSON$stringify(props, null, 4))), __jsx(MDBBtn, {\n    href: \"register\"\n  }, \"I dont do anything yet,sorta\"))))));\n};\n\nIndex.getInitialProps =\n/*#__PURE__*/\n_asyncToGenerator(\n/*#__PURE__*/\n_regeneratorRuntime.mark(function _callee2() {\n  var IP, API_URL, data, res;\n  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return public_ip.v4();\n\n        case 2:\n          IP = _context2.sent;\n          API_URL = 'http://' + IP + ':3000/get_image'; //Default data incase Fetch fails. \n\n          data = {\n            file_url: undefined,\n            file_name: undefined,\n            api_url: API_URL,\n            client_ip: IP\n          };\n          _context2.next = 7;\n          return fetch(API_URL).then(\n          /*#__PURE__*/\n          function () {\n            var _ref2 = _asyncToGenerator(\n            /*#__PURE__*/\n            _regeneratorRuntime.mark(function _callee(received_data) {\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return received_data.json();\n\n                    case 2:\n                      data = _context.sent;\n                      console.log(\"Image fetched\");\n\n                    case 4:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n\n            return function (_x) {\n              return _ref2.apply(this, arguments);\n            };\n          }())[\"catch\"](function () {\n            console.log(\"Failed to fetch image\");\n          });\n\n        case 7:\n          res = _context2.sent;\n          return _context2.abrupt(\"return\", {\n            data: data,\n            client_ip: IP\n          });\n\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _callee2);\n}));\nexport default Index;","map":{"version":3,"sources":["/home/nafis_shah/github/Poststorm_Imagery/src/dashboard/web_server/pages/index.js"],"names":["Layout","Fetch","MDBBtn","MDBCard","MDBCardBody","MDBCardImage","MDBCardTitle","MDBCardText","MDBCol","public_ip","SAD_FACE","Index","props","width","data","file_url","file_name","getInitialProps","v4","IP","API_URL","undefined","api_url","client_ip","fetch","then","received_data","json","console","log","res"],"mappings":";;;;;AAAA,OAAOA,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,SAASC,MAAT,EAAiBC,OAAjB,EAA0BC,WAA1B,EAAuCC,YAAvC,EAAqDC,YAArD,EAAmEC,WAAnE,EAAgFC,MAAhF,QAA8F,UAA9F;AACA,OAAOC,SAAP,MAAsB,WAAtB;AAEA,IAAMC,QAAQ,sKAAd;;AAIA,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,KAAD;AAAA,SAEV,MAAC,MAAD,QACI,sBACI,MAAC,MAAD;AAAQ,IAAA,SAAS,EAAC;AAAlB,KACI,MAAC,OAAD;AAAS,IAAA,KAAK,EAAE;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAAhB;AAAmC,IAAA,SAAS,EAAC;AAA7C,KACI,MAAC,YAAD;AAAc,IAAA,SAAS,EAAC,+BAAxB;AAAwD,IAAA,GAAG,EAAED,KAAK,CAACE,IAAN,CAAWC,QAAX,IAAuBL,QAApF;AAA8F,IAAA,GAAG,EAAC,aAAlG;AAA+G,IAAA,KAAK;AAApH,IADJ,EAEI,MAAC,WAAD,QACI,MAAC,YAAD;AAAc,IAAA,SAAS,EAAC;AAAxB,KAAyCE,KAAK,CAACE,IAAN,CAAWE,SAApD,CADJ,EAEI,MAAC,WAAD;AAAa,IAAA,SAAS,EAAC;AAAvB,KACI,iBACI,iCADJ,CADJ,EAMI;AAAG,IAAA,SAAS,EAAC;AAAb,KACC,gBAAeJ,KAAf,EAAsB,IAAtB,EAA4B,CAA5B,CADD,CANJ,CAFJ,EAYI,MAAC,MAAD;AAAQ,IAAA,IAAI,EAAC;AAAb,oCAZJ,CAFJ,CADJ,CADJ,CADJ,CAFU;AAAA,CAAd;;AA4BAD,KAAK,CAACM,eAAN;AAAA;AAAA;AAAA;AAAA,yBAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAEJR,SAAS,CAACS,EAAV,EAFI;;AAAA;AAEdC,UAAAA,EAFc;AAGdC,UAAAA,OAHc,GAGN,YAAUD,EAAV,GAAa,iBAHP,EAIpB;;AACIL,UAAAA,IALgB,GAKT;AACPC,YAAAA,QAAQ,EAACM,SADF;AAEPL,YAAAA,SAAS,EAACK,SAFH;AAGPC,YAAAA,OAAO,EAACF,OAHD;AAIPG,YAAAA,SAAS,EAACJ;AAJH,WALS;AAAA;AAAA,iBAYFK,KAAK,CAACJ,OAAD,CAAL,CAAeK,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA,qCAAoB,iBAAeC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAErBA,aAAa,CAACC,IAAd,EAFqB;;AAAA;AAElCb,sBAAAA,IAFkC;AAGlCc,sBAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;;AAHkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAApB;;AAAA;AAAA;AAAA;AAAA,wBAKT,YAAW;AAChBD,YAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACH,WAPiB,CAZE;;AAAA;AAYdC,UAAAA,GAZc;AAAA,4CAqBb;AACHhB,YAAAA,IAAI,EAACA,IADF;AAEHS,YAAAA,SAAS,EAACJ;AAFP,WArBa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAxB;AA2BA,eAAeR,KAAf","sourcesContent":["import Layout from '../src/components/layout'\nimport Fetch from 'isomorphic-unfetch';\nimport { MDBBtn, MDBCard, MDBCardBody, MDBCardImage, MDBCardTitle, MDBCardText, MDBCol } from 'mdbreact';\nimport public_ip from 'public-ip'\n\nconst SAD_FACE =`\nhttps://www.nationwidechildrens.org/-/media/nch/giving/images/on-our-sleeves-1010/icons/icon-teasers/w45084_iconcollectionlandingiconteaserimages_facesad.jpg\n`\n\nconst Index = (props) => (\n    \n    <Layout >\n        <center>\n            <MDBCol className=\"pt-2\">\n                <MDBCard style={{ width: \"auto\" }} className=\"stylish-color-dark\">\n                    <MDBCardImage className=\"w-75 img-fluid pt-4 pb-4 px-2\" src={props.data.file_url || SAD_FACE} alt=\"The big sad\"waves />\n                    <MDBCardBody >\n                        <MDBCardTitle className=\"white-text h3\">{props.data.file_name}</MDBCardTitle>\n                        <MDBCardText className=\"white-text\">\n                            <b>\n                                <u>\n                                    Wowe api call\n                                </u>\n                            </b>\n                            <p className='green-text'>\n                            {JSON.stringify(props, null, 4)}\n                            </p>\n                        </MDBCardText>\n                        <MDBBtn href=\"register\">I dont do anything yet,sorta</MDBBtn>\n                    </MDBCardBody>\n                </MDBCard>\n            </MDBCol>\n        </center> \n    </Layout>\n    \n)\n\nIndex.getInitialProps = async function() {\n    \n    const IP =await public_ip.v4()\n    const API_URL='http://'+IP+':3000/get_image'\n    //Default data incase Fetch fails. \n    let data = {\n        file_url:undefined,\n        file_name:undefined,\n        api_url:API_URL,\n        client_ip:IP\n    }\n\n    const res = await fetch(API_URL).then(async function(received_data) {\n        \n        data = await received_data.json()\n        console.log(\"Image fetched\");\n       \n    }).catch(function() {\n        console.log(\"Failed to fetch image\");\n    });\n      \n    return {\n        data:data,\n        client_ip:IP\n    }\n}\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}